(this["webpackJsonpecommerce-shop"]=this["webpackJsonpecommerce-shop"]||[]).push([[0],{41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a(2),n=a.n(s),r=a(16),i=a.n(r),o=a(3),l=a(4),d=a.n(l),u=(a(41),a(17)),j=function(e){return Object(c.jsxs)("div",{className:"watch-card",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(u.a,{className:"image"}),Object(c.jsx)("p",{className:"name",children:e.name}),Object(c.jsx)("p",{children:e.details.length<40?e.details:"".concat(e.details.slice(0,40),"...")}),Object(c.jsxs)("p",{className:"price",children:["$",e.price]})]}),e.userData?Object(c.jsx)("div",{children:void 0===e.userData.watchlist.find((function(t){return t.id===e._id}))?Object(c.jsx)("button",{onClick:function(){return function(t,a){var c={userId:e.userData._id,watchId:t,watchName:a};d.a.put("/api/users/addToWatchlist",c).then((function(t){d.a.get("/api/users",{params:{email:e.userData.email}}).then((function(t){var a=t.data;e.setUserData(a);var c=t.headers["auth-token"];sessionStorage.setItem("userToken",c)})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))}(e._id,e.name)},children:"Add to watchlist"}):Object(c.jsx)("button",{onClick:function(){return function(t){var a={userId:e.userData._id,watchId:t};d.a.put("/api/users/removeFromWatchlist",a).then((function(t){d.a.get("/api/users",{params:{email:e.userData.email}}).then((function(t){var a=t.data;e.setUserData(a);var c=t.headers["auth-token"];sessionStorage.setItem("userToken",c)})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))}(e._id)},children:"Already being watched"})}):Object(c.jsx)("div",{children:Object(c.jsx)("button",{children:"Login to add to watchlist"})})]})},h=function(e){var t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],r=a[1];Object(s.useEffect)((function(){i()}),[]);var i=function(){d.a.get("./api/products").then((function(e){r(e.data)})).catch((function(e){console.error("Error: "+e)}))};return Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)("div",{className:"hero",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"column-1",children:Object(c.jsx)("div",{className:"item-1",children:Object(c.jsx)("p",{children:"Chronograph watches"})})}),Object(c.jsxs)("div",{className:"column-2",children:[Object(c.jsx)("div",{className:"item-2",children:Object(c.jsx)("p",{children:"Dress watches"})}),Object(c.jsx)("div",{className:"item-3",children:Object(c.jsx)("p",{children:"Automatic watches"})})]})]})}),Object(c.jsxs)("div",{className:"category__container",children:[Object(c.jsx)("div",{className:"header",children:Object(c.jsx)("h1",{children:"Chronograph watches"})}),Object(c.jsx)("div",{className:"container",children:n.filter((function(e){return"chronograph"===e.category})).map((function(t){return Object(c.jsx)(j,{userData:e.userData,setUserData:e.setUserData,_id:t._id,name:t.name,details:t.details,price:t.price})}))})]}),Object(c.jsxs)("div",{className:"category__container",children:[Object(c.jsx)("div",{className:"header",children:Object(c.jsx)("h1",{children:"Automatic watches"})}),Object(c.jsx)("div",{className:"container",children:n.filter((function(e){return"automatic"===e.category})).map((function(t){return Object(c.jsx)(j,{userData:e.userData,setUserData:e.setUserData,_id:t._id,name:t.name,details:t.details,price:t.price})}))})]}),Object(c.jsxs)("div",{className:"category__container",children:[Object(c.jsx)("div",{className:"header",children:Object(c.jsx)("h1",{children:"Dress watches"})}),Object(c.jsx)("div",{className:"container",children:n.filter((function(e){return"dress"===e.category})).map((function(t){return Object(c.jsx)(j,{userData:e.userData,setUserData:e.setUserData,_id:t._id,name:t.name,details:t.details,price:t.price})}))})]}),Object(c.jsx)("div",{className:"footer",children:Object(c.jsx)("h1",{children:"Created by Joshua Lausberg"})})]})},b=function(e){var t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)("login"),l=Object(o.a)(i,2),u=l[0],j=l[1],h=Object(s.useState)("phill@gmail.com"),b=Object(o.a)(h,2),m=b[0],O=b[1],p=Object(s.useState)("phill123"),x=Object(o.a)(p,2),g=x[0],f=x[1],v=Object(s.useState)(""),N=Object(o.a)(v,2),w=N[0],_=N[1],D=Object(s.useState)(""),k=Object(o.a)(D,2),C=k[0],y=k[1],S=Object(s.useState)(""),U=Object(o.a)(S,2),I=U[0],E=U[1];return Object(c.jsx)("div",{className:"auth",children:Object(c.jsxs)("div",{className:"auth__container",children:[Object(c.jsxs)("h1",{children:[Object(c.jsx)("span",{onClick:function(){return j("login")},className:"login"===u?"active":void 0,children:"Login"})," | ",Object(c.jsx)("span",{onClick:function(){return j("register")},className:"register"===u?"active":void 0,children:"Register"})]}),"login"===u&&Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{type:"text",required:!0,placeholder:"login-email"===n[0]?n[1]:"Email",value:m,onChange:function(e){return O(e.target.value)}}),Object(c.jsx)("input",{type:"password",required:!0,placeholder:"login-password"===n[0]?n[1]:"Password",value:g,onChange:function(e){return f(e.target.value)}}),Object(c.jsx)("button",{className:"submit",onClick:function(t){return function(t,a,c){t.preventDefault();var s={email:a,password:c};d.a.post("/api/users/login",s).then((function(t){if("success"===t.data)d.a.get("/api/users",{params:{email:m}}).then((function(t){var a=t.data;e.setUserData(a);var c=t.headers["auth-token"];sessionStorage.setItem("userToken",c),e.setIsLoggedIn(!0),e.setView("home")})).catch((function(e){console.log("Error: "+e)}));else{var a=[];switch(t.data.match(/"([^"]*)"/)[1]){case"email":a=["login-email",t.data],r(a),O("");break;case"password":a=["login-password",t.data],r(a),f("");break;default:console.log("something went wrong...")}}console.log(t.data)}))}(t,m,g)},children:"Login"})]}),"registered"===n&&Object(c.jsxs)("p",{children:["Successfully registered!",Object(c.jsx)("br",{}),"Please login."]})]}),"register"===u&&Object(c.jsx)("div",{className:"register__container",children:"registered"!==n&&Object(c.jsxs)("form",{className:"input-main",children:[Object(c.jsx)("input",{type:"text",required:!0,placeholder:"register-name"===n[0]?n[1]:"Name",value:w,onChange:function(e){return _(e.target.value)}}),Object(c.jsx)("input",{type:"text",required:!0,placeholder:"register-email"===n[0]?n[1]:"Email",value:C,onChange:function(e){return y(e.target.value)}}),Object(c.jsx)("input",{type:"password",required:!0,placeholder:"register-password"===n[0]?n[1]:"Password",value:I,onChange:function(e){return E(e.target.value)}}),Object(c.jsx)("button",{className:"submit",onClick:function(e){return function(e){e.preventDefault();var t={name:w,email:C,password:I};d.a.post("/api/users/register",t).then((function(e){if("success"===e.data)j("login"),r("registered");else{var t=[];switch(e.data.match(/"([^"]*)"/)[1]){case"name":t=["register-name",e.data],r(t),_("");break;case"email":t=["register-email",e.data],r(t),y("");break;case"password":t=["register-password",e.data],r(t),E("");break;default:console.log("something went wrong...")}}})).catch((function(e){console.log(e)}))}(e)},children:"Register"})]})})]})})},m=function(e){n.a.useEffect((function(){console.log(e.userData)}),[]);return Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsx)("h1",{children:"User dash"}),Object(c.jsx)("h3",{children:"Watchlist:"}),e.userData.watchlist.map((function(t){return Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:t.name}),Object(c.jsx)("button",{onClick:function(){return function(t){var a={userId:e.userData._id,watchId:t};d.a.put("/api/users/removeFromWatchlist",a).then((function(t){e.updateUserData()})).catch((function(e){console.log(e)}))}(t.id)},children:"Remove from watchlist"})]})}))]})},O=function(e){var t=Object(s.useState)(),a=Object(o.a)(t,2),r=a[0],i=a[1],l=Object(s.useState)(""),u=Object(o.a)(l,2),j=u[0],h=u[1],b=Object(s.useState)(""),m=Object(o.a)(b,2),O=m[0],p=m[1],x=Object(s.useState)(""),g=Object(o.a)(x,2),f=g[0],v=g[1],N=Object(s.useState)(""),w=Object(o.a)(N,2),_=w[0],D=w[1];n.a.useEffect((function(){console.log(e.userData)}),[]);var k=function(){d.a.get("./api/products").then((function(e){i(e.data),console.log(r)})).catch((function(e){console.error("Error: "+e)}))};return Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsx)("h1",{children:"Admin"}),Object(c.jsxs)("div",{className:"add-watch__container",children:[Object(c.jsx)("h3",{children:"Add new watch:"}),Object(c.jsxs)("div",{className:"input__container",children:[Object(c.jsx)("label",{children:"Name"}),Object(c.jsx)("input",{type:"text",value:j,onChange:function(e){return h(e.target.value)}})]}),Object(c.jsxs)("div",{className:"input__container",children:[Object(c.jsx)("label",{children:"Details"}),Object(c.jsx)("textarea",{rows:"4",cols:"50",value:O,onChange:function(e){return p(e.target.value)}})]}),Object(c.jsxs)("div",{className:"input__container",children:[Object(c.jsx)("label",{children:"Price"}),Object(c.jsx)("input",{type:"number",min:"1",step:"any",value:f,onChange:function(e){return v(e.target.value)}})]}),Object(c.jsxs)("div",{className:"input__container",children:[Object(c.jsx)("label",{children:"Category"}),Object(c.jsxs)("select",{value:_,onChange:function(e){return D(e.target.value)},children:[Object(c.jsx)("option",{value:"",disabled:!0,children:"Choose a type"}),Object(c.jsx)("option",{value:"automatic",children:"Automatic"}),Object(c.jsx)("option",{value:"chronograph",children:"Chronograph"}),Object(c.jsx)("option",{value:"dress",children:"Dress"})]})]}),Object(c.jsx)("button",{onClick:function(){var e={name:j,details:O,price:f,category:_};d.a.post("./api/products/addWatch",e).then((function(e){k()})).catch((function(e){console.log(e)}))},children:"Add watch"})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:k,children:"View all watches"}),r&&r.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:["Name: ",e.name]}),Object(c.jsxs)("p",{children:["Category: ",e.category]}),Object(c.jsxs)("p",{children:["Price: $",e.price]}),Object(c.jsx)("button",{onClick:function(){return t=e._id,void d.a.delete("/api/products/deleteWatch/"+t).then((function(e){k()})).catch((function(e){console.log(e)}));var t},children:"Delete"})]})}))]})]})},p=a(6);var x=function(){var e=n.a.useState(),t=Object(o.a)(e,2),a=t[0],s=t[1],r=n.a.useState(!1),i=Object(o.a)(r,2),l=i[0],u=i[1],j=n.a.useState("home"),x=Object(o.a)(j,2),g=x[0],f=x[1],v=function(){d.a.get("/api/users",{params:{email:a.email}}).then((function(e){var t=e.data;s(t);var a=e.headers["auth-token"];sessionStorage.setItem("userToken",a)})).catch((function(e){console.log("Error: "+e)}))};return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsx)("div",{className:"logo"}),Object(c.jsx)("div",{className:"links__container",children:Object(c.jsx)("div",{className:"link",children:Object(c.jsx)("p",{onClick:function(){return f("home")},children:"Home"})})}),l?Object(c.jsxs)("div",{className:"profile",children:["admin"===a.role?Object(c.jsx)(p.b,{className:"profile__icon",onClick:function(){return f("admin-dashboard")}}):Object(c.jsx)(p.b,{className:"profile__icon",onClick:function(){return f("user-dashboard")}}),Object(c.jsx)(p.a,{className:"logout__icon",onClick:function(){return u(!1)}})]}):Object(c.jsx)("div",{className:"profile",children:Object(c.jsx)("p",{onClick:function(){return f("login")},children:"Login"})})]}),"home"===g&&Object(c.jsx)(h,{userData:a,setUserData:s}),"login"===g&&Object(c.jsx)(b,{setUserData:s,setIsLoggedIn:u,setView:f}),"admin-dashboard"===g&&Object(c.jsx)(O,{userData:a,setUserData:s,updateUserData:v}),"user-dashboard"===g&&Object(c.jsx)(m,{userData:a,setUserData:s,updateUserData:v})]})};i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.aa14f1e5.chunk.js.map