(this["webpackJsonpecommerce-shop"]=this["webpackJsonpecommerce-shop"]||[]).push([[0],{47:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(2),r=c.n(a),s=c(8),i=c.n(s),o=c(4),l=c.n(o),d=(c(47),c(3)),u=function(e){return{type:"UPDATE_VIEW",payload:e}},j=function(e){return{type:"UPDATE_USERDATA",payload:e}},h=function(e){return{type:"UPDATE_ISLOGGED",payload:e}},b=c(5),O=c(12),m=function(e){var t=Object(d.b)(),c=Object(d.c)((function(e){return e.userData})),a=Object(d.c)((function(e){return e.isLogged}));return Object(n.jsxs)("div",{className:"watch-card",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{className:"image"}),Object(n.jsx)("p",{className:"name",children:e.name}),Object(n.jsx)("p",{children:e.details.length<40?e.details:"".concat(e.details.slice(0,40),"...")}),Object(n.jsxs)("p",{className:"price",children:["$",e.price]})]}),a?Object(n.jsxs)("div",{children:[void 0===c.watchlist.find((function(t){return t.id===e._id}))?Object(n.jsx)("button",{onClick:function(){return function(e,n){var a={userId:c._id,watchId:e,watchName:n};l.a.put("/api/users/addToWatchlist",a).then((function(e){l.a.get("/api/users",{params:{email:c.email}}).then((function(e){var c=e.data;t(j(c));var n=e.headers["auth-token"];sessionStorage.setItem("userToken",n)})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))}(e._id,e.name)},children:"Add to watchlist"}):Object(n.jsx)("button",{onClick:function(){return function(e){var n={userId:c._id,watchId:e};l.a.put("/api/users/removeFromWatchlist",n).then((function(e){l.a.get("/api/users",{params:{email:c.email}}).then((function(e){var c=e.data;t(j(c));var n=e.headers["auth-token"];sessionStorage.setItem("userToken",n)})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))}(e._id)},children:"Already being watched"}),Object(n.jsx)("button",{onClick:function(){return t(u("product"))},children:"View"})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{onClick:function(){return t(u("login"))},children:"Login to add to watchlist"}),Object(n.jsx)("button",{onClick:function(){return t(u("product"))},children:"View"})]})]})},p=function(e){Object(d.c)((function(e){return e.userData}));var t=Object(a.useState)([]),c=Object(b.a)(t,2),r=c[0],s=c[1];Object(a.useEffect)((function(){i()}),[]);var i=function(){l.a.get("./api/products").then((function(e){s(e.data)})).catch((function(e){console.error("Error: "+e)}))};return Object(n.jsxs)("div",{className:"home",children:[Object(n.jsx)("div",{className:"hero",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"column-1",children:Object(n.jsx)("div",{className:"item-1",children:Object(n.jsx)("p",{children:"Chronograph watches"})})}),Object(n.jsxs)("div",{className:"column-2",children:[Object(n.jsx)("div",{className:"item-2",children:Object(n.jsx)("p",{children:"Dress watches"})}),Object(n.jsx)("div",{className:"item-3",children:Object(n.jsx)("p",{children:"Automatic watches"})})]})]})}),Object(n.jsxs)("div",{className:"category__container",children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsx)("h1",{children:"Chronograph watches"})}),Object(n.jsx)("div",{className:"container",children:r.filter((function(e){return"chronograph"===e.category})).map((function(t){return Object(n.jsx)(m,{setView:e.setView,_id:t._id,name:t.name,details:t.details,price:t.price})}))})]}),Object(n.jsxs)("div",{className:"category__container",children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsx)("h1",{children:"Automatic watches"})}),Object(n.jsx)("div",{className:"container",children:r.filter((function(e){return"automatic"===e.category})).map((function(e){return Object(n.jsx)(m,{_id:e._id,name:e.name,details:e.details,price:e.price})}))})]}),Object(n.jsxs)("div",{className:"category__container",children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsx)("h1",{children:"Dress watches"})}),Object(n.jsx)("div",{className:"container",children:r.filter((function(e){return"dress"===e.category})).map((function(t){return Object(n.jsx)(m,{setView:e.setView,_id:t._id,name:t.name,details:t.details,price:t.price})}))})]}),Object(n.jsx)("div",{className:"footer",children:Object(n.jsx)("h1",{children:"Created by Joshua Lausberg"})})]})},f=function(e){var t=Object(d.b)(),c=(Object(d.c)((function(e){return e.view})),Object(d.c)((function(e){return e.isLogged})),Object(a.useState)("login")),r=Object(b.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)([]),O=Object(b.a)(o,2),m=O[0],p=O[1],f=Object(a.useState)("legion@gmail.com"),g=Object(b.a)(f,2),x=g[0],v=g[1],_=Object(a.useState)("legion123"),w=Object(b.a)(_,2),N=w[0],k=w[1],y=Object(a.useState)(""),C=Object(b.a)(y,2),E=C[0],D=C[1],S=Object(a.useState)(""),A=Object(b.a)(S,2),I=A[0],T=A[1],U=Object(a.useState)(""),L=Object(b.a)(U,2),P=L[0],V=L[1];return Object(n.jsx)("div",{className:"auth",children:Object(n.jsxs)("div",{className:"auth__container",children:[Object(n.jsxs)("h1",{children:[Object(n.jsx)("span",{onClick:function(){return i("login")},className:"login"===s?"active":void 0,children:"Login"})," | ",Object(n.jsx)("span",{onClick:function(){return i("register")},className:"register"===s?"active":void 0,children:"Register"})]}),"login"===s&&Object(n.jsxs)("div",{className:"login__container",children:[Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{type:"text",required:!0,placeholder:"login-email"===m[0]?m[1]:"Email",value:x,onChange:function(e){return v(e.target.value)}}),Object(n.jsx)("input",{type:"password",required:!0,placeholder:"login-password"===m[0]?m[1]:"Password",value:N,onChange:function(e){return k(e.target.value)}}),Object(n.jsx)("button",{className:"submit",onClick:function(e){return function(e,c,n){e.preventDefault();var a={email:c,password:n};l.a.post("/api/users/login",a).then((function(e){if("success"===e.data)l.a.get("/api/users",{params:{email:x}}).then((function(e){var c=e.data;t(j(c));var n=e.headers["auth-token"];sessionStorage.setItem("userToken",n),t(h(!0)),t(u("home"))})).catch((function(e){console.log("Error: "+e)}));else{var c=[];switch(e.data.match(/"([^"]*)"/)[1]){case"email":c=["login-email",e.data],p(c),v("");break;case"password":c=["login-password",e.data],p(c),k("");break;default:console.log("something went wrong...")}}console.log(e.data)}))}(e,x,N)},children:"Login"})]}),"registered"===m&&Object(n.jsxs)("p",{children:["Successfully registered!",Object(n.jsx)("br",{}),"Please login."]})]}),"register"===s&&Object(n.jsx)("div",{className:"register__container",children:"registered"!==m&&Object(n.jsxs)("form",{className:"input-main",children:[Object(n.jsx)("input",{type:"text",required:!0,placeholder:"register-name"===m[0]?m[1]:"Name",value:E,onChange:function(e){return D(e.target.value)}}),Object(n.jsx)("input",{type:"text",required:!0,placeholder:"register-email"===m[0]?m[1]:"Email",value:I,onChange:function(e){return T(e.target.value)}}),Object(n.jsx)("input",{type:"password",required:!0,placeholder:"register-password"===m[0]?m[1]:"Password",value:P,onChange:function(e){return V(e.target.value)}}),Object(n.jsx)("button",{className:"submit",onClick:function(e){return function(e){e.preventDefault();var c={name:E,email:I,password:P};l.a.post("/api/users/register",c).then((function(e){if("success"===e.data)t(u("login")),p("registered");else{var c=[];switch(e.data.match(/"([^"]*)"/)[1]){case"name":c=["register-name",e.data],p(c),D("");break;case"email":c=["register-email",e.data],p(c),T("");break;case"password":c=["register-password",e.data],p(c),V("");break;default:console.log("something went wrong...")}}})).catch((function(e){console.log(e)}))}(e)},children:"Register"})]})})]})})},g=function(e){Object(d.b)();var t=Object(d.c)((function(e){return e.userData}));r.a.useEffect((function(){console.log(t)}),[]);return Object(n.jsxs)("div",{className:"profile",children:[Object(n.jsx)("h1",{children:"User dash"}),Object(n.jsx)("h3",{children:"Watchlist:"}),t.watchlist.map((function(c){return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:c.name}),Object(n.jsx)("button",{onClick:function(){return function(c){var n={userId:t._id,watchId:c};l.a.put("/api/users/removeFromWatchlist",n).then((function(t){e.readUserData()})).catch((function(e){console.log(e)}))}(c.id)},children:"Remove from watchlist"})]})}))]})},x=function(e){Object(d.b)();var t=Object(d.c)((function(e){return e.userData})),c=Object(a.useState)(),s=Object(b.a)(c,2),i=s[0],o=s[1],u=Object(a.useState)(""),j=Object(b.a)(u,2),h=j[0],O=j[1],m=Object(a.useState)(""),p=Object(b.a)(m,2),f=p[0],g=p[1],x=Object(a.useState)(""),v=Object(b.a)(x,2),_=v[0],w=v[1],N=Object(a.useState)(""),k=Object(b.a)(N,2),y=k[0],C=k[1];r.a.useEffect((function(){console.log(t)}),[]);var E=function(){l.a.get("./api/products").then((function(e){o(e.data),console.log(i)})).catch((function(e){console.error("Error: "+e)}))};return Object(n.jsxs)("div",{className:"profile",children:[Object(n.jsx)("h1",{children:"Admin"}),Object(n.jsxs)("div",{className:"add-watch__container",children:[Object(n.jsx)("h3",{children:"Add new watch:"}),Object(n.jsxs)("div",{className:"input__container",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("input",{type:"text",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(n.jsxs)("div",{className:"input__container",children:[Object(n.jsx)("label",{children:"Details"}),Object(n.jsx)("textarea",{rows:"4",cols:"50",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(n.jsxs)("div",{className:"input__container",children:[Object(n.jsx)("label",{children:"Price"}),Object(n.jsx)("input",{type:"number",min:"1",step:"any",value:_,onChange:function(e){return w(e.target.value)}})]}),Object(n.jsxs)("div",{className:"input__container",children:[Object(n.jsx)("label",{children:"Category"}),Object(n.jsxs)("select",{value:y,onChange:function(e){return C(e.target.value)},children:[Object(n.jsx)("option",{value:"",disabled:!0,children:"Choose a type"}),Object(n.jsx)("option",{value:"automatic",children:"Automatic"}),Object(n.jsx)("option",{value:"chronograph",children:"Chronograph"}),Object(n.jsx)("option",{value:"dress",children:"Dress"})]})]}),Object(n.jsx)("button",{onClick:function(){var e={name:h,details:f,price:_,category:y};l.a.post("./api/products/addWatch",e).then((function(e){E()})).catch((function(e){console.log(e)}))},children:"Add watch"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{onClick:E,children:"View all watches"}),i&&i.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:["Name: ",e.name]}),Object(n.jsxs)("p",{children:["Category: ",e.category]}),Object(n.jsxs)("p",{children:["Price: $",e.price]}),Object(n.jsx)("button",{onClick:function(){return t=e._id,void l.a.delete("/api/products/deleteWatch/"+t).then((function(e){E()})).catch((function(e){console.log(e)}));var t},children:"Delete"})]})}))]})]})},v=function(e){var t=Object(a.useState)(),c=Object(b.a)(t,2);c[0],c[1];return Object(n.jsx)("div",{className:"product__container",children:Object(n.jsx)("p",{children:"Product"})})},_=c(9);var w=function(){var e=Object(d.c)((function(e){return e.userData})),t=Object(d.c)((function(e){return e.view})),c=Object(d.c)((function(e){return e.isLogged})),a=Object(d.b)(),r=function(){l.a.get("/api/users",{params:{email:e.email}}).then((function(e){var t=e.data;a(j(t));var c=e.headers["auth-token"];sessionStorage.setItem("userToken",c)})).catch((function(e){console.log("Error: "+e)}))};return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("div",{className:"navbar",children:[Object(n.jsx)("div",{className:"logo"}),Object(n.jsx)("div",{className:"links__container",children:Object(n.jsx)("div",{className:"link",children:Object(n.jsx)("p",{onClick:function(){return a(u("home"))},children:"Home"})})}),c?Object(n.jsxs)("div",{className:"profile",children:["admin"===e.role?Object(n.jsx)(_.b,{className:"profile__icon",onClick:function(){return a(u("admin-dashboard"))}}):Object(n.jsx)(_.b,{className:"profile__icon",onClick:function(){return a(u("user-dashboard"))}}),Object(n.jsx)(_.a,{className:"logout__icon",onClick:function(){return a(h(!1))}})]}):Object(n.jsx)("div",{className:"profile",children:Object(n.jsx)("p",{onClick:function(){return a(u("login"))},children:"Login"})})]}),"home"===t&&Object(n.jsx)(p,{}),"login"===t&&Object(n.jsx)(f,{}),"admin-dashboard"===t&&Object(n.jsx)(x,{readUserData:r}),"user-dashboard"===t&&Object(n.jsx)(g,{readUserData:r}),"product"===t&&Object(n.jsx)(v,{readUserData:r})]})},N=c(7),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USERDATA":return t.payload;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VIEW":return t.payload;default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ISLOGGED":return t.payload;default:return e}},E=Object(N.b)({userData:k,view:y,isLogged:C}),D=Object(N.c)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(n.jsx)(d.a,{store:D,children:Object(n.jsx)(w,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.9ad6440d.chunk.js.map